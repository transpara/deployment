apiVersion: charts.transpara.com/v1
kind: TSystem
metadata:
  name: tsystem
spec:
  # Default values copied from <project_dir>/helm-charts/tsystem/values.yaml
  global:
    CONTAINER_HOST: 172.22.52.199
    imagePullPolicy: Always
    imagePullSecret: transpara-docker-secret
  tSystemApi:
    config:
      BASE_PATH: /tsystem/api/v1
      DOCKER_FILE_BASE_PATH: /transpara/deployment
      DOCKER_FILE_TEMPLATE_PATH: /transpara/deployment/template
      SSH_PORT: "22"
      TSYSTEM_ID: 049f6ed7-e015-47cd-961c-8ae249cd412d
      USERNAME: transpara
    image:
      repository: transpara/tsystem
      tag: kube-test
    name: tsystem-api
    ports:
      containerPort: 80
      servicePort: 80
    replicas: 1
    serviceName: tsystem-api-service
    volumeMount:
      mountPath: /app/database
      name: tsystem-api-data
  tSystemApiPv:
    accessModes:
    - ReadWriteOnce
    capacity: 1Gi
    hostPath: /transpara/data/volumes/tsystem-api-data
    name: tsystem-api-data
    storageClassName: local-path
  tSystemApiPvc:
    accessModes:
    - ReadWriteOnce
    name: tsystem-api-data-claim
    storage: 1Gi
    storageClassName: local-path
  tSystemCache:
    image:
      repository: transpara/tcache
    name: tsystem-cache
    ports:
      containerPort: 6379
      servicePort: 6379
    replicas: 1
    serviceName: tsystem-cache-service
    volumeMount:
      mountPath: /data
      name: tsystem-cache-data
  tSystemCachePv:
    accessModes:
    - ReadWriteOnce
    capacity: 1Gi
    hostPath: /transpara/data/volumes/tsystem-cache-data
    name: tsystem-cache-data
    storageClassName: local-path
  tSystemCachePvc:
    accessModes:
    - ReadWriteOnce
    name: tsystem-cache-data-claim
    storage: 1Gi
    storageClassName: local-path
  tSystemUi:
    config:
      BASE_PATH: /tsystem
    image:
      repository: transpara/tsystem-ui
      tag: kube-test
    name: tsystem-ui
    ports:
      containerPort: 3000
      servicePort: 3000
    replicas: 2
    serviceName: tsystem-ui-service
  
  
